<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>项目管理系统</title>
    <link rel="stylesheet" href="./lib/easyui/themes/icon.css">
    <link rel="stylesheet" href="./lib/easyui/themes/color.css">
    <link rel="stylesheet" href="./lib/easyui/themes/default/easyui.css">
    <link rel="stylesheet" href="./public/css/easyui-extend.css">
    <link rel="stylesheet" href="./public/css/main.css">
</head>

<body>

    <div class="easyui-layout" data-options="fit:true,border:false" id="ly_main">
        <div class="" data-options="region:'north',height:52">
            <div class="header">
                <div class="logo">
                    项目管理系统
                </div>
                <div class="left">

                </div>
                <div class="right">

                </div>
            </div>
        </div>

        <div data-options="region:'west',width:160,title:'菜单'">
            <div id="accordon_menu"></div>
        </div>
        <div class="" data-options="region:'center',border:false">
            <div class="easyui-tabs" id="tabs_main" data-options="fit:true,border:false,tabHeight:30">
                <div title="系统首页">

                </div>
            </div>
        </div>
        <div data-options="region:'south',height:25">
            <div class="p-bottom">
                <div>
                    当前人员:<span>18</span>
                </div>
            </div>
        </div>
    </div>

    <script src="./lib/easyui/jquery.min.js"></script>
    <script src="./lib/easyui/jquery.easyui.min.js"></script>
    <script src="./public/js/main.js"></script>
    <script>    
        $(function () {
            var menus = [{
                name: '设置',
                url: '',
                children: [{
                    name: '基本字典', url: 'views/base/basicDict.html'
                }, {
                    name: '客户信息', url: 'views/base/hospital.html'
                }, {
                    name: '部门信息', url: 'views/organization/depart.html'
                },, {
                    name: '人员信息', url: 'views/base/users.html'
                }]
            }, {
                name: '权限',
                url: '',
                children: [{
                    name: '菜单管理', url: 'views/permission/menu.html'
                }, {
                    name: '角色授权', url: 'views/permission/rolesetting.html'
                }, {
                    name: '权限设置', url: 'views/permission/psetting.html'
                },]
            }, {
                name: '项目',
                url: '',
                children: [{
                    name: '项目立项', url: 'views/project/build.html'
                }, {
                    name: '项目履约', url: 'views/project/performance.html'
                }, {
                    name: '信息查询', url: 'views/project/queryproject.html'
                },]
            }, {
                name: '管理',
                url: '',
                children: [{
                    name: '项目维护', url: 'views/manage/maintenance.html'
                }, {
                    name: '文档审核', url: 'views/manage/fileapprove.html'
                }, {
                    name: '阶段设置', url: 'views/manage/stageset.html'
                },]
            }, {
                name: '报表',
                url: '',
                children: [{
                    name: '履约周报', url: 'views/report/weekreport.html'
                }, {
                    name: '客户分布', url: 'views/report/custom.html'
                }, {
                    name: '年度完成统计', url: 'views/report/yearcountreport.html'
                },]
            }]
            var methods = {
                init: function () {
                    $.parser.parse('#ly_main')
                    // $.initMenu();
                    methods.initMenu();

                },
                initMenu: function () {
                    var strMenu = menus.map(function (item) {
                        var strList = item.children.map(function (item) {
                            return '<li><a href="#"  _href="' + item.url + '">' + item.name + '</a></li>';
                        }).join('')
                        return '<div title="' + item.name + '"><ul class="submenu">' + strList + '</ul></div>';
                    });
                    $('#accordon_menu').append(strMenu);
                    $('#accordon_menu').accordion({
                        title: "菜单",
                        width: 80,
                        fit: true,
                        border: false
                    });

                    $('.submenu>li>a').bind('click', function () {
                        var url = $(this).attr('_href');
                        var title = $(this).text();
                        $.tabAdd(title, url);
                    })
                }
            }


            methods.init();
        })
    </script>
</body>

</html>